#include <exploit/recovery.h>

bool send_command_to_recovery_mode(usb_handle_t *handle, char *command) {
	int commandLength = strlen(command);
	if (commandLength >= 0x100) {
		LOG(LOG_ERROR, "Command is too long");
		return false;
	}
	if (commandLength < 1) {
		LOG(LOG_ERROR, "Command is too short");
		return false;
	}
	transfer_ret_t ret;
	send_usb_control_request(handle, 0x40, 0, 0, 0, (unsigned char*)command, commandLength + 1, &ret);
	return true;
}